@import globals
@import mixins

@import compass/css3/box
@import compass/css3/transform

// layout
html, body
  height: 100%

body
  +display-box
  +box-orient(vertical)
  +box-align(stretch)

#main
  +box-flex(1)
  +display-box
  +box-orient(horizontal)
  +box-align(stretch)
  width: 100%
  nav
    max-width: 18em
    min-width: 18em
    border-right: $border_width solid $color_border
    border-left:  $border_width solid $color_border
  section.conversation
    +box-flex(1)

    +display-box
    +box-orient(vertical)
    +box-align(stretch)

    border-right: $border_width solid $color_border
    border-left:  $border_width solid $color_border
    .messages
      +box-flex(1)
      overflow: auto


#main
  nav
    ul
      list-style-type: none
      margin: 0
      padding: 0
    .conversation
      &:hover
        background-color: $color_background_light
      &.current
        background-color: $color_background
        position: relative
        // triangle
        &:after
          +rotate(45deg)
          position: absolute
          right: - (sqrt(2em) / 2 - $border_width)
          top: 50%
          margin-top: - (sqrt(2em) / 2 - $border_width)
          content: '.'
          display: block
          width: 1em
          height: 1em
          border-right: $border_width*2 solid $color_border
          border-top:   $border_width*2 solid $color_border
          background-color: $color_background
          color: $color_background

      .actions
        display: none
        float: right
        i:hover
          color: $color_main
      &:hover .actions
        display: inline-block
      // borders between conversations
      border-bottom: $border_width solid $color_border_light

    .conversation a
      +clearfix
      text-decoration: none
      color: $color_main
      display: block
      padding: 0.5em 0
      margin: 0 0.5em

      h3
        float: left
        margin: 0
        font-size: 1.2em
      .last-message-date
        float: right
        padding: 0.1em

      .last-message
        clear: both
        font-size: 0.9em
        color: $color_sub
        white-space: nowrap
        text-overflow: ellipsis
        overflow: hidden

  section.conversation
    ul
      list-style-type: none
      margin: 0
      padding: 0
      li
        margin: 0 1em
    h3
      float: left
      margin: 0
      font-size: 1em
    .message-date
      float: right
      color: $color_sub
    p
      margin-bottom: 1em
      clear: both

    form
      padding: 1em
      background-color: $color_background

      border-top: $border_width solid $color_border_light

    .edit-area
      &.disabled
        +disabled

      border: $border_width solid $color_border_light
      background-color: #fff
      .text-area
        padding: 0.25em
      textarea
        &:focus
          outline: 0 none transparent
        border: none
        width: 100%
        resize: none
        padding: 0
        margin: 0
        font-size: 0.9em
      .controls
        +clearfix
        border-top: $border_width dotted $color_border_light
        .submit
          label
            padding: 0.5em
            line-height: 2.8em
            font-size: 0.8em
            color: $color_sub_light
            cursor: pointer
            &:hover
              color: $color_sub
          input[type=submit]
            +button($color_main, #fff)

          border-left: $border_width dotted $color_border_light
          float: right

