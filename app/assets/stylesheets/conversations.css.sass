@import globals
@import mixins

#main
  nav
    float: left
    width: 20rem
    border-right: $border_width solid $color_border
    border-left:  $border_width solid $color_border
  section.conversation
    float: left
    width: 40rem - 4*$border_width
    border-right: $border_width solid $color_border
    border-left:  $border_width solid $color_border
    .messages
      overflow: auto

#main
  nav
    ul
      list-style-type: none
      margin: 0
      padding: 0
    .conversation
      &:hover
        background-color: $color_background_light
      &.current
        background-color: $color_background
        position: relative
        // triangle
        &:after
          transform: rotate(45deg)
          position: absolute
          right: - (1.4rem / 2 - $border_width)
          top: 50%
          margin-top: - (1.4rem / 2 - $border_width)
          content: '.'
          display: block
          width: 1rem
          height: 1rem
          border-right: $border_width*2 solid $color_border
          border-top:   $border_width*2 solid $color_border
          background-color: $color_background
          color: $color_background

      .actions
        position: relative
        display: none
        float: right
        i:hover
          color: $color_main
      &:hover .actions
        display: inline-block
      // borders between conversations
      border-bottom: $border_width solid $color_border_light

    .conversation a
      +clearfix
      text-decoration: none
      color: $color_main
      display: block
      padding: 0.5rem 0
      margin: 0 0.5rem

      h3
        float: left
        margin: 0
        font-size: 1.2rem
      .last-message-date
        float: right
        padding: 0.1rem

      .last-message
        clear: both
        font-size: 0.9rem
        color: $color_sub
        white-space: nowrap
        text-overflow: ellipsis
        overflow: hidden

  #follow
    border: none
    padding: 0
    height: 0

  section.conversation
    ul
      list-style-type: none
      margin: 0
      padding: 0
      li
        padding: 0.5rem 1rem 0.5rem 1rem
        border-top: $border_width solid $color_background
        &.mine
          background-color: $color_background_light
        &.merged
          border-top: none
          h3
            display: none
        &.separated:before
          content: attr(data-day-separator)
          display: block
          text-align: center
          margin-bottom: 0.5rem
          text-transform: capitalize
          color: $color_sub_light
          font-size: 0.8em
    h3
      float: left
      margin: 0
      font-size: 0.8em
      color: $color_sub_light
      font-weight: normal
      a
        cursor: pointer
        &:hover
          color: $color_main
        &:first-child
          padding-right: 0.5em
          margin-right: 0.5em
          border-right: $border_width dotted $color_sub_light

    time
      margin-right: -3.5em
      font-size: 0.8em
      float: right
      color: $color_sub_light
      text-transform: lowercase
      &:hover
        color: $color_main
    p
      clear: both
      margin: 0
      padding-right: 3em
      message-body
        white-space: pre-line

    form
      padding: 1rem
      background-color: $color_background

      border-top: $border_width solid $color_border_light

    .edit-area
      &.disabled
        +disabled

      border: $border_width solid $color_border_light
      background-color: #fff
      .text-area
        padding: 0.25rem
      textarea
        &:focus
          outline: 0 none transparent
        border: none
        width: 100%
        resize: none
        padding: 0
        margin: 0
        font-size: 0.9rem
      .controls
        +clearfix
        border-top: $border_width dotted $color_border_light
        .submit
          label
            padding: 0.5rem
            line-height: 2.2rem
            font-size: 0.8rem
            color: $color_sub_light
            cursor: pointer
            &:hover
              color: $color_sub
          button
            +button($color_main, #fff)

          border-left: $border_width dotted $color_border_light
          float: right

